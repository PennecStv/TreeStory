{% extends "/base/base.twig" %}

{% block title %}TreeStory - Configuration Profil{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="/assets/css/configProfil.css">
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="/assets/scripts/configProfilScript.js"></script>
{% endblock %}


{% block body %}
    <!-- Modal de confirmation de suppression de compte -->
    <div class="content">
        <div class="config-card-form">
            <form method="post" action="/configProfil" id="form-config">

                <div>
                    <label>Identifiant :</label>
                    <input type="text" name="modif_userName" id="modif_userName" placeholder="Choisissez un nouvel identifiant" autocomplete="off" value = {{userName}}>

                    <label>E-mail :</label>
                    <input type="text" name="modif_mail" id="modif_mail" placeholder="Choisissez un nouvel E-mail"  autocomplete="off"  value = {{userMail}}>
                </div>

                <!-- Modification de mot de passe -->
                <div>
                    <button type="submit" class="pswd_button" name="pswd_button" id="pswd_button">Modifier mon mot de passe</button>
                </div>


                <label>Image de profil:</label><br>
                <img src={{userAvatar}} width="100" height="100"><br>
                <label id = "modif_avatar">Ajouter une image
                    <input type="file" name="modif_avatar" id = "modif_avatar" accept ="image/png, image/jpeg, image/jpg">
                </label>
                

                <div>
                    <label>Biographie :</label>
                    <textarea type="text" name="modif_bio" id = "modif_bio" placeholder="Écrire ici votre biographie..." autocomplete="off">{{userBio}}</textarea>
                </div>

                <!-- Sauvegarder les modifications -->
                <div>
                    <button type="submit" class="modif_button" name="modif_button" id="modif_button">Enregistrer les modifications</button>
                </div>
            </form>
        </div>

        <!-- Supprimer le compte -->
        <div class="delete-button">
            <button type="submit" class="supp_button" name="supp_button" id="supp_button">Supprimer le compte</button>
        </div>


        <!-- Modal de confirmation de suppression de compte -->
        <div id="delete-Modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="modal-header">
                    <h2>Êtes-vous sûr de vouloir supprimer votre compte ?</h2>
                    </h3>La suppression sera irréversible.<h3>
                </div>

                <div class="modal-body">
                    <form method="post" action="/configProfil">

                    <label>Mot de passe pour confirmer la suppression :</label>
                    <div class="modal-password">
                        <input type="password" name="confirm_password" id="confirm_password" placeholder="Veuillez entrer votre mot de passe" autocomplete="off">
                    </div>

                    <div class="modal-confirm">
                        <button type="submit" class="confirm_button" name="confirm_button" id="confirm_button">Oui</button>
                    </div>
                    </form>

                    <div class="modal-cancel">
                        <button class="cancel_button" id="cancel_button">Non</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Message d'erreur lors de la modification de compte -->
        {% if messageErreur is defined and messageErreur is not empty %}
            <p class="erreur"><i class="fas fa-info-circle"></i> <span>{{ messageErreur }}</span></p>
        {% endif %}

        {% if messageSucces is defined and messageSucces is not empty %}
            <p class="succes"><i class="fas fa-info-circle"></i> <span>{{ messageSucces }}</span></p>
        {% endif %}

    </div>
{% endblock %}

